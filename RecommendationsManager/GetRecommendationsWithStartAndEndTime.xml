<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="d9926aad-38b7-420d-8aa8-bb26b4390a3b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="GetRecommendationsWithStartAndEndTime" searchProperties="true" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="d9926aad-38b7-420d-8aa8-bb26b4390a3bfileName">GetRecommendationsWithStartAndEndTime</con:setting></con:settings><con:testStep type="restrequest" name="GetApplicationAndBaseUrl" id="a56259f7-6949-44f3-81c2-c8f03cb94b63"><con:settings/><con:config service="http://eclipselab1.vf.rogers.com" resourcePath="/platform/rest/v37/system/applications" methodName="Applications" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetApplicationAndBaseUrl" id="b10021b7-b812-4d5c-a973-caa91df66d59" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="CAMP-SESSION" value="${CampID}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://eclipselab1.vf.rogers.com</con:endpoint><con:request/><con:originalUri>http://eclipselab1.vf.rogers.com/platform/rest/v37/system/applications</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2a3ffd38-71aa-4134-83a5-de22615d3d38" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="X-DEBUG-HHID" value="${#Project#HHID}"/>
  <con:entry key="X-W3-DEVICE-ID" value="${#Project#DeviceID}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
</con:parameters><con:parameterOrder><con:entry>CAMP-SESSION</con:entry><con:entry>Content-Type</con:entry><con:entry>X-W3-DEVICE-ID</con:entry><con:entry>X-DEBUG-HHID</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="StartSession" id="2641635e-68d7-48c5-a538-ef20c0a4c684"><con:settings/><con:config service="http://eclipselab1.vf.rogers.com" resourcePath="/platform/rest/v37/session/start" methodName="Start" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="StartSession" id="577fb335-9101-47a5-bff5-7bc7d4eddf10" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="CAMP-SESSION" value="${CampID}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://eclipselab1.vf.rogers.com</con:endpoint><con:request>{
   "additionalParameters": {
      "deviceType": "${#Project#deviceType}",
      "latitude": "${#Project#latitude}",
      "longitude": "${#Project#longitude}"
   }
}</con:request><con:originalUri>http://eclipselab1.vf.rogers.com/platform/rest/v37/session/start</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="10f10b34-d040-4503-88ac-3ac37fe6d3b1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="X-DEBUG-HHID" value="${#Project#HHID}"/>
  <con:entry key="X-W3-DEVICE-ID" value="${#Project#DeviceID}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
</con:parameters><con:parameterOrder><con:entry>CAMP-SESSION</con:entry><con:entry>Content-Type</con:entry><con:entry>X-W3-DEVICE-ID</con:entry><con:entry>X-DEBUG-HHID</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Transfer_JSessionID" id="50cf100e-7958-454e-bc58-e068b8e9f5c4"><con:settings/><con:config><script>var test = testRunner.getTestCase().getTestStepByName("StartSession").httpRequest.response.responseHeaders;

var full = test.toString();
var jStart = full.indexOf("JSESSIONID");
var jEnd = full.indexOf("; Path=");
var jValue = full.substring(jStart, jEnd+1);

var tStart = full.indexOf("mint-sso-token");
var tEnd = full.indexOf("GMT;");
var tValue = full.substring(tStart, tEnd+4);


context.setProperty("JSessionID", jValue);
context.setProperty("MintToken", tValue);

log.info(jValue);
log.info(tValue);</script></con:config></con:testStep><con:testStep type="restrequest" name="GetUser" id="efca57dc-ee8e-4652-a2f8-ba56218e7fe2"><con:settings/><con:config service="http://eclipselab1.vf.rogers.com" resourcePath="/platform/rest/v37/user/{UserID}" methodName="GetUser" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetUser" id="c8217f27-8906-4cba-8b92-dca316a65074" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="CAMP-SESSION" value="${CampID}"/>
  &lt;con:entry key="Cookie" value="${JSessionID} ${MintToken}"/>
&lt;/xml-fragment></con:setting></con:settings><con:request/><con:originalUri>http://eclipselab1.vf.rogers.com/platform/rest/v37/user/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="681f93ff-7e97-45c4-ab81-6fba1865e67d" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="X-DEBUG-HHID" value="${#Project#HHID}"/>
  <con:entry key="X-W3-DEVICE-ID" value="${#Project#DeviceID}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
</con:parameters><con:parameterOrder><con:entry>CAMP-SESSION</con:entry><con:entry>Content-Type</con:entry><con:entry>X-W3-DEVICE-ID</con:entry><con:entry>X-DEBUG-HHID</con:entry><con:entry>UserID</con:entry><con:entry>GroupID</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetRatingSystems" id="b241fcb6-88a6-44f4-be6f-80521526e69f"><con:settings/><con:config service="http://eclipselab1.vf.rogers.com" resourcePath="/videos/rest/v35/media/rating/systems" methodName="Systems" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetRatingSystems" id="276f0a4f-b1a9-4c70-9581-a6cc90704a02" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="CAMP-SESSION" value="${CampID}"/>
  &lt;con:entry key="Cookie" value="${JSessionID} ${MintToken}"/>
&lt;/xml-fragment></con:setting></con:settings><con:request/><con:originalUri>http://eclipselab1.vf.rogers.com/videos/rest/v35/media/rating/systems</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c3c7c6aa-bc58-4094-b4c6-d41eab02c587" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="X-DEBUG-HHID" value="${#Project#HHID}"/>
  <con:entry key="X-W3-DEVICE-ID" value="${#Project#DeviceID}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
</con:parameters><con:parameterOrder><con:entry>CAMP-SESSION</con:entry><con:entry>Content-Type</con:entry><con:entry>X-W3-DEVICE-ID</con:entry><con:entry>X-DEBUG-HHID</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetRecommendations" id="96ae6176-b81c-47f8-89c1-0cada196c72f"><con:settings/><con:config service="http://eclipselab1.vf.rogers.com" resourcePath="/videos/rest/v35/recommendations" methodName="Recommendations" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetRecommendations" id="48245707-cf4d-4186-a1b3-6308eaa20fb3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="${JSessionID} ${MintToken}"/>
  &lt;con:entry key="CAMP-SESSION" value="${CampID}"/>
&lt;/xml-fragment></con:setting></con:settings><con:request/><con:originalUri>http://eclipselab1.vf.rogers.com/videos/rest/v35/recommendations</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="73bf03a8-f6a4-4e40-8ae7-4d520dbd1ebf" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="X-DEBUG-HHID" value="${#Project#HHID}"/>
  <con:entry key="X-W3-DEVICE-ID" value="${#Project#DeviceID}"/>
  <con:entry key="size" value="10"/>
  <con:entry key="ratingId" value="7"/>
  <con:entry key="startTime" value="2014-08-04T15:34:50Z"/>
  <con:entry key="endTime" value="2016-08-04T15:34:50Z"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
</con:parameters><con:parameterOrder><con:entry>CAMP-SESSION</con:entry><con:entry>Content-Type</con:entry><con:entry>X-W3-DEVICE-ID</con:entry><con:entry>X-DEBUG-HHID</con:entry><con:entry>offset</con:entry><con:entry>size</con:entry><con:entry>startTime</con:entry><con:entry>endTime</con:entry><con:entry>ratingId</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="EndSession" id="819ff950-86f8-409d-bed7-8d156f5f0db0"><con:settings/><con:config service="http://eclipselab1.vf.rogers.com" resourcePath="/platform/rest/v37/session/end" methodName="End" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EndSession" id="563f4d1f-356e-4bbd-be8f-ffdc93bb1770" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="CAMP-SESSION" value="${CampID}"/>
  &lt;con:entry key="Cookie" value="${JSessionID} ${MintToken}"/>
&lt;/xml-fragment></con:setting></con:settings><con:request/><con:originalUri>http://eclipselab1.vf.rogers.com/platform/rest/v37/session/end</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="62cded87-0468-4f9a-a7f4-bef6213da496" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200
</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="X-DEBUG-HHID" value="${#Project#HHID}"/>
  <con:entry key="X-W3-DEVICE-ID" value="${#Project#DeviceID}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
</con:parameters><con:parameterOrder><con:entry>CAMP-SESSION</con:entry><con:entry>Content-Type</con:entry><con:entry>X-W3-DEVICE-ID</con:entry><con:entry>X-DEBUG-HHID</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>c9a9a897-38fd-4afc-aade-db50aeb13105</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1b66ae07-a15d-4943-9285-ab48da12198a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4851579-7c2f-43f5-89cd-d3228d1d4409</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6fac1c2c-6ac8-4bcf-9558-ec796c60eac9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>692efbfb-39d8-4dfd-8686-9b1d4d1819f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4c5f66e-d31e-42b9-be16-5fa452d6c5e9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>20116710-9037-4e90-8ae6-e9738b901dbc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bb183184-7487-4837-9e3b-5d903b352865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9006ae8d-4c3c-4ee3-a72b-90e7c676ddf4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>14be4e7e-f705-423f-b8af-2fb77b1e7fec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fba5c65f-4d69-4279-94c9-4ce9bd48b3ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8f11e8cc-1c38-45d4-a355-f64ff129d06d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5cb50e41-689f-41a2-8433-fa32dc12b6e6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fd7ebfea-2093-49e4-95c8-6e52b9923527</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a235f514-0fa5-4e98-af85-5bdd955116aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>